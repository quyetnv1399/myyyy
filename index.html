<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Okena</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: black;
    position: relative;
    height: 100vh;
  }
  #video-container {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 512px;
    height: 400px; /* Lấy phần giữa video */
    overflow: hidden;
    transform: translate(-50%, -50%);
    pointer-events: auto;
    z-index: 10;
    border-radius: 10px;
    /* Ban đầu không có iframe nên không chiếm chỗ */
  }
  iframe {
    position: relative;
    top: -255px; /* Đẩy iframe lên để lấy phần giữa */
    width: 512px;
    height: 910px;
    border: none;
  }
  canvas {
    display: block;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 1;
  }
</style>
</head>
<body>
  <div id="video-container">
    <!-- iframe sẽ được thêm sau 2s -->
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
  <script>
    let scene = new THREE.Scene();
    let camera = new THREE.PerspectiveCamera(
      75,
      window.innerWidth / window.innerHeight,
      0.1,
      1000
    );
    let renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setClearColor(0x000000, 0);
    document.body.appendChild(renderer.domElement);

    const meteorCount = 100;
    const meteors = [];

    for (let i = 0; i < meteorCount; i++) {
      let geometry = new THREE.BufferGeometry();
      let positions = new Float32Array([0, 0, 0, -0.5, -1.5, 0]);
      geometry.setAttribute("position", new THREE.BufferAttribute(positions, 3));
      let material = new THREE.LineBasicMaterial({ color: 0xffffff });
      let meteor = new THREE.Line(geometry, material);

      meteor.position.set(
        (Math.random() - 0.5) * 50,
        Math.random() * 30,
        (Math.random() - 0.5) * 20
      );
      meteor.velocity = new THREE.Vector3(-0.03, -0.1, 0);
      scene.add(meteor);
      meteors.push(meteor);
    }

    camera.position.z = 20;

    function animate() {
      requestAnimationFrame(animate);

      meteors.forEach((meteor) => {
        meteor.position.add(meteor.velocity);
        if (meteor.position.y < -20) {
          meteor.position.y = Math.random() * 30;
          meteor.position.x = (Math.random() - 0.5) * 50;
        }
      });

      renderer.render(scene, camera);
    }

    animate();

    // Sau 2 giây mới tạo iframe và thêm vào DOM để video bắt đầu phát
    setTimeout(() => {
      const videoContainer = document.getElementById("video-container");
      const iframe = document.createElement("iframe");
      iframe.src =
          "https://www.youtube.com/embed/eXtUUoEDJeg?autoplay=1&controls=0&loop=1&playlist=eXtUUoEDJeg&modestbranding=1&rel=0&playsinline=1";;
      iframe.title = "meme mèo cười";
      iframe.allow =
        "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share";
      iframe.allowFullscreen = true;
      iframe.referrerPolicy = "strict-origin-when-cross-origin";
      iframe.style.position = "relative";
      iframe.style.top = "-255px";
      iframe.style.width = "512px";
      iframe.style.height = "910px";
      iframe.style.border = "none";

      videoContainer.appendChild(iframe);
    }, 2000);

    window.addEventListener("resize", () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>
